<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Soso Galaxy Conquest - Conqu√™te Spatiale Multijoueur</title>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.80.1/dist/phaser.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <style>
    body { margin: 0; background: #000; overflow: hidden; }
  </style>
</head>
<body>
<script>
  const socket = io();

  const config = {
    type: Phaser.AUTO,
    width: window.innerWidth,
    height: window.innerHeight,
    backgroundColor: '#000011',
    scene: { create }
  };
  const game = new Phaser.Game(config);

  function create() {
    this.add.text(window.innerWidth / 2, 80, 'SOSO GALAXY CONQUEST üöÄ', {
      fontSize: '48px', color: '#ffffff'
    }).setOrigin(0.5);

    this.add.text(window.innerWidth / 2, 140, 'Clique sur une plan√®te verte pour la conqu√©rir !', {
      fontSize: '28px', color: '#00ff00'
    }).setOrigin(0.5);

    socket  socket.on('galaxy', (planets) => {
      this.children.removeAll();

      planets.forEach(p => {
        const color = p.owner === 'neutre' ? 0x00ff00 : 0xff0000;
        const circle = this.add.circle(p.x, p.y, 25, color, 0.8)
          .setStrokeStyle(3, 0xffffff)
          .setInteractive({ cursor: 'pointer' })
          .on('pointerdown', () => {
            if (p.owner === 'neutre') socket.emit('conquer', p.id);
          });

        this.add.text(p.x - 60, p.y - 60, `ID: ${p.id}\nM√©tal: ${p.resources.metal}\n√ânergie: ${p.resources.energy}\nArm√©e: ${p.army}`, {
          fontSize: '14px', color: '#ffffff', backgroundColor: '#000000aa', padding: { x: 8, y: 5 }
        });
      });
    });
  }
</script>
</body>
</html>
