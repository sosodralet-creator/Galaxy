<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GeoStrategy - SÃ©lection du Pays</title>
  <script src="https://cdn.jsdelivr.net/npm/three@0.168.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.168.0/examples/js/controls/OrbitControls.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.168.0/examples/js/loaders/GLTFLoader.js"></script>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: 'Orbitron', sans-serif;
      background: #000;
      color: #0ff;
    }

    #container {
      display: flex;
      height: 100vh;
    }

    #earth-container {
      flex: 1;
      position: relative;
      background: radial-gradient(circle at center, #001122 0%, #000 70%);
    }

    #ui-panel {
      width: 400px;
      background: rgba(10, 20, 40, 0.85);
      backdrop-filter: blur(10px);
      border-left: 1px solid #0ff;
      box-shadow: -10px 0 30px rgba(0, 255, 255, 0.3);
      padding: 40px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      z-index: 10;
    }

    h1 {
      text-align: center;
      font-size: 2.5em;
      margin-bottom: 50px;
      text-shadow: 0 0 20px #0ff;
      letter-spacing: 4px;
    }

    .country-option {
      background: rgba(0, 50, 100, 0.6);
      border: 1px solid #0ff;
      border-radius: 12px;
      padding: 20px;
      margin: 15px 0;
      cursor: pointer;
      transition: all 0.4s ease;
      text-align: center;
      font-size: 1.3em;
      box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
    }

    .country-option:hover:not(.taken) {
      transform: translateY(-8px);
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.6);
      background: rgba(0, 80, 150, 0.8);
    }

    .country-option.taken {
      opacity: 0.4;
      cursor: not-allowed;
      background: rgba(100, 0, 0, 0.6);
      border-color: #f55;
    }

    .country-option.taken::after {
      content: " (DÃ©jÃ  pris)";
      color: #f88;
      font-size: 0.8em;
    }

    .select-btn {
      margin-top: 40px;
      padding: 15px;
      font-size: 1.4em;
      background: #0ff;
      color: #000;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 0 20px #0ff;
      transition: all 0.3s;
    }

    .select-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 40px #0ff;
    }

    .select-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      background: #555;
      box-shadow: none;
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
</head>
<body>
  <div id="container">
    <!-- Partie gauche : Terre 3D -->
    <div id="earth-container"></div>

    <!-- Partie droite : SÃ©lection du pays -->
    <div id="ui-panel">
      <h1>SÃ‰LECTIONNEZ VOTRE PAYS</h1>

      <div class="country-option" data-country="France">ðŸ‡«ðŸ‡· France</div>
      <div class="country-option" data-country="Ã‰tats-Unis">ðŸ‡ºðŸ‡¸ Ã‰tats-Unis</div>
      <div class="country-option taken" data-country="Chine">ðŸ‡¨ðŸ‡³ Chine</div>
      <div class="country-option" data-country="Russie">ðŸ‡·ðŸ‡º Russie</div>
      <div class="country-option" data-country="BrÃ©sil">ðŸ‡§ðŸ‡· BrÃ©sil</div>
      <div class="country-option" data-country="Inde">ðŸ‡®ðŸ‡³ Inde</div>
      <div class="country-option taken" data-country="Japon">ðŸ‡¯ðŸ‡µ Japon</div>
      <div class="country-option" data-country="Allemagne">ðŸ‡©ðŸ‡ª Allemagne</div>
      <div class="country-option" data-country="Canada">ðŸ‡¨ðŸ‡¦ Canada</div>

      <button id="confirm-btn" class="select-btn" disabled>CONFIRMER ET REJOINDRE</button>
    </div>
  </div>

  <script>
    // Terre 3D avec Three.js
    let scene, camera, renderer, earth, controls;
    const earthContainer = document.getElementById('earth-container');

    function initEarth() {
      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(45, earthContainer.clientWidth / earthContainer.clientHeight, 0.1, 1000);
      renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
      renderer.setSize(earthContainer.clientWidth, earthContainer.clientHeight);
      earthContainer.appendChild(renderer.domElement);

      // ContrÃ´les orbite limitÃ©s
      controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableZoom = true;
      controls.enablePan = false;
      controls.minDistance = 3;
      controls.maxDistance = 8;
      controls.autoRotate = true;
      controls.autoRotateSpeed = 0.5;

      // LumiÃ¨re
      const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
      scene.add(ambientLight);
      const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
      directionalLight.position.set(5, 3, 5);
      scene.add(directionalLight);

      // Chargement d'un modÃ¨le simple de Terre (sphÃ¨re texturÃ©e)
      const loader = new THREE.TextureLoader();
      const geometry = new THREE.SphereGeometry(2, 64, 64);
      loader.load('https://threejs.org/examples/textures/planets/earth_atmos_2048.jpg', (texture) => {
        const material = new THREE.MeshPhongMaterial({
          map: texture,
          specular: new THREE.Color(0x333333),
          shininess: 5
        });
        earth = new THREE.Mesh(geometry, material);
        scene.add(earth);
      });

      // Nuages optionnels
      loader.load('https://threejs.org/examples/textures/planets/earth_clouds_1024.png', (cloudsTexture) => {
        const cloudsGeo = new THREE.SphereGeometry(2.01, 64, 64);
        const cloudsMat = new THREE.MeshPhongMaterial({
          map: cloudsTexture,
          transparent: true,
          opacity: 0.4
        });
        const clouds = new THREE.Mesh(cloudsGeo, cloudsMat);
        scene.add(clouds);
        // Animation des nuages
        function animateClouds() {
          clouds.rotation.y += 0.0005;
          requestAnimationFrame(animateClouds);
        }
        animateClouds();
      });

      camera.position.z = 5;

      window.addEventListener('resize', onWindowResize);
      animate();
    }

    function onWindowResize() {
      camera.aspect = earthContainer.clientWidth / earthContainer.clientHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(earthContainer.clientWidth, earthContainer.clientHeight);
    }

    function animate() {
      requestAnimationFrame(animate);
      if (earth) earth.rotation.y += 0.0005;
      controls.update();
      renderer.render(scene, camera);
    }

    // Gestion du sÃ©lecteur de pays
    let selectedCountry = null;
    const countries = document.querySelectorAll('.country-option');
    const confirmBtn = document.getElementById('confirm-btn');

    countries.forEach(country => {
      country.addEventListener('click', () => {
        if (country.classList.contains('taken')) return;

        // DÃ©sÃ©lectionner les autres
        countries.forEach(c => c.style.border = '1px solid #0ff');
        // SÃ©lectionner celui-ci
        country.style.border = '2px solid #0ff';
        country.style.boxShadow = '0 0 40px rgba(0, 255, 255, 0.8)';
        selectedCountry = country.getAttribute('data-country');
        confirmBtn.disabled = false;
      });
    });

    confirmBtn.addEventListener('click', () => {
      if (selectedCountry) {
        alert(`Vous avez rejoint le jeu en tant que dirigeant de : ${selectedCountry} !\n(Prochaines Ã©tapes Ã  venir...)`);
        // Ici tu pourras rediriger vers la vue du pays
      }
    });

    // Initialisation
    initEarth();
  </script>
</body>
</html>
